<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2024-02-08T18:52:38.000Z" agent="Rohan Framework" version="22.1.0" type="device">
  <diagram name="Architecture" id="rohan-architecture">
    <mxGraphModel dx="1434" dy="780" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Rohan Agentic Simulation Framework" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=24;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="500" y="20" width="600" height="40" as="geometry" />
        </mxCell>

        <!-- User Input -->
        <mxCell id="goal" value="ðŸŽ¯ Goal&#xa;Strategy Description" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="720" y="80" width="160" height="60" as="geometry" />
        </mxCell>

        <!-- Strategy Generation Loop Container -->
        <mxCell id="gen-loop" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="180" width="400" height="280" as="geometry" />
        </mxCell>
        <mxCell id="gen-loop-label" value="ðŸ“ Strategy Generation Loop" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=14;fontStyle=1;fontColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="50" y="185" width="200" height="20" as="geometry" />
        </mxCell>

        <!-- Writer Agent -->
        <mxCell id="writer" value="Writer Agent&#xa;&#xa;â€¢ Generate strategy code&#xa;â€¢ Uses goal + feedback&#xa;â€¢ LangChain LLM" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="230" width="140" height="100" as="geometry" />
        </mxCell>

        <!-- Validator Agent -->
        <mxCell id="validator" value="Validator Agent&#xa;&#xa;â€¢ AST safety checks&#xa;â€¢ Sandbox execution&#xa;â€¢ Max 3 retries" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="260" y="230" width="140" height="100" as="geometry" />
        </mxCell>

        <!-- Writer to Validator Arrow -->
        <mxCell id="w-to-v" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;strokeWidth=2;strokeColor=#82b366;" edge="1" parent="1" source="writer" target="validator">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="w-to-v-label" value="code" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="220" y="255" width="40" height="20" as="geometry" />
        </mxCell>

        <!-- Validator to Writer (retry) Arrow -->
        <mxCell id="v-to-w" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;entryX=0.5;entryY=1;strokeWidth=2;strokeColor=#d79b00;dashed=1;" edge="1" parent="1" source="validator" target="writer">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="330" y="380" />
              <mxPoint x="150" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="v-to-w-label" value="âŒ error + retry" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=10;fontColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="200" y="385" width="80" height="20" as="geometry" />
        </mxCell>

        <!-- Scenario Execution Container -->
        <mxCell id="scenario-exec" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="180" width="320" height="280" as="geometry" />
        </mxCell>
        <mxCell id="scenario-exec-label" value="âš¡ Scenario Execution" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=14;fontStyle=1;fontColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="490" y="185" width="200" height="20" as="geometry" />
        </mxCell>

        <!-- Scenario Executor -->
        <mxCell id="executor" value="Scenario Executor&#xa;&#xa;â€¢ Run ABIDES simulation&#xa;â€¢ Collect metrics&#xa;â€¢ Baseline comparison" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="520" y="230" width="140" height="80" as="geometry" />
        </mxCell>

        <!-- Scenarios -->
        <mxCell id="s1" value="Scenario 1&#xa;Volatile Market" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="500" y="340" width="90" height="50" as="geometry" />
        </mxCell>
        <mxCell id="s2" value="Scenario 2&#xa;Stable Market" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="600" y="340" width="90" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sn" value="Scenario N&#xa;Custom" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;strokeDasharray=3;" vertex="1" parent="1">
          <mxGeometry x="700" y="340" width="90" height="50" as="geometry" />
        </mxCell>

        <!-- Executor to Scenarios -->
        <mxCell id="ex-to-s1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;html=1;strokeWidth=1;strokeColor=#6c8ebf;" edge="1" parent="1" source="executor" target="s1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ex-to-s2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;html=1;strokeWidth=1;strokeColor=#6c8ebf;" edge="1" parent="1" source="executor" target="s2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ex-to-sn" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;html=1;strokeWidth=1;strokeColor=#6c8ebf;dashed=1;" edge="1" parent="1" source="executor" target="sn">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Validator to Executor -->
        <mxCell id="v-to-ex" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;entryX=0;entryY=0.5;strokeWidth=2;strokeColor=#82b366;" edge="1" parent="1" source="validator" target="executor">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="v-to-ex-label" value="âœ… valid" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=10;fontColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="450" y="255" width="40" height="20" as="geometry" />
        </mxCell>

        <!-- Analysis Container -->
        <mxCell id="analysis" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="840" y="180" width="320" height="280" as="geometry" />
        </mxCell>
        <mxCell id="analysis-label" value="ðŸ” Scenario Analysis" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=14;fontStyle=1;fontColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="850" y="185" width="200" height="20" as="geometry" />
        </mxCell>

        <!-- Explainer Agents -->
        <mxCell id="e1" value="Explainer Agent&#xa;ðŸ› ï¸ Tools" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;strokeColor=#996185;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="860" y="230" width="90" height="50" as="geometry" />
        </mxCell>
        <mxCell id="e2" value="Explainer Agent&#xa;ðŸ› ï¸ Tools" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;strokeColor=#996185;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="960" y="230" width="90" height="50" as="geometry" />
        </mxCell>
        <mxCell id="en" value="Explainer Agent&#xa;ðŸ› ï¸ Tools" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;strokeColor=#996185;fontSize=10;strokeDasharray=3;" vertex="1" parent="1">
          <mxGeometry x="1060" y="230" width="90" height="50" as="geometry" />
        </mxCell>

        <!-- Scenarios to Explainers -->
        <mxCell id="s1-to-e1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;html=1;strokeWidth=1;strokeColor=#996185;" edge="1" parent="1" source="s1" target="e1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="545" y="410" />
              <mxPoint x="820" y="410" />
              <mxPoint x="820" y="255" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="s2-to-e2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;html=1;strokeWidth=1;strokeColor=#996185;" edge="1" parent="1" source="s2" target="e2">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="645" y="420" />
              <mxPoint x="830" y="420" />
              <mxPoint x="830" y="255" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Tools Box -->
        <mxCell id="tools" value="Available Tools:&#xa;â€¢ get_agent_trades()&#xa;â€¢ compute_pnl_curve()&#xa;â€¢ plot_price_series()&#xa;â€¢ query_dataframe()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=9;align=left;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="860" y="300" width="130" height="80" as="geometry" />
        </mxCell>

        <!-- Aggregator -->
        <mxCell id="aggregator" value="Aggregator + Judge&#xa;&#xa;â€¢ Cross-scenario synthesis&#xa;â€¢ Score iteration (1-10)&#xa;â€¢ Compare to history&#xa;â€¢ Recommend: continue/stop" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#647687;strokeColor=#314354;fontColor=#ffffff;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1000" y="310" width="150" height="100" as="geometry" />
        </mxCell>

        <!-- Explainers to Aggregator -->
        <mxCell id="e1-to-agg" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;html=1;strokeWidth=1;strokeColor=#647687;" edge="1" parent="1" source="e1" target="aggregator">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2-to-agg" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;html=1;strokeWidth=1;strokeColor=#647687;" edge="1" parent="1" source="e2" target="aggregator">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Aggregator back to Writer -->
        <mxCell id="agg-to-w" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=1;entryX=0;entryY=0;strokeWidth=2;strokeColor=#647687;" edge="1" parent="1" source="aggregator" target="writer">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1000" y="500" />
              <mxPoint x="40" y="500" />
              <mxPoint x="40" y="230" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="agg-to-w-label" value="feedback + score (if continue)" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=10;fontColor=#647687;" vertex="1" parent="1">
          <mxGeometry x="400" y="505" width="160" height="20" as="geometry" />
        </mxCell>

        <!-- Goal to Writer -->
        <mxCell id="goal-to-w" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6c8ebf;" edge="1" parent="1" source="goal" target="writer">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="160" />
              <mxPoint x="150" y="160" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- Done/Failed Endpoints -->
        <mxCell id="done" value="âœ… Done&#xa;(converged)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1200" y="340" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="failed" value="ðŸ’¥ Failed&#xa;(max retries)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="330" y="420" width="100" height="50" as="geometry" />
        </mxCell>

        <!-- Aggregator to Done -->
        <mxCell id="agg-to-done" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;html=1;strokeWidth=2;strokeColor=#82b366;" edge="1" parent="1" source="aggregator" target="done">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- State Box -->
        <mxCell id="state" value="RefinementState&#xa;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&#xa;â€¢ goal&#xa;â€¢ current_code&#xa;â€¢ iterations[]&#xa;â€¢ scenario_results[]&#xa;â€¢ explanations[]&#xa;â€¢ judge_score" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;align=left;spacingLeft=5;" vertex="1" parent="1">
          <mxGeometry x="1200" y="180" width="120" height="130" as="geometry" />
        </mxCell>

        <!-- Infrastructure Layer -->
        <mxCell id="infra" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="560" width="1280" height="80" as="geometry" />
        </mxCell>
        <mxCell id="infra-label" value="Infrastructure Layer" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=12;fontStyle=1;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="50" y="565" width="150" height="20" as="geometry" />
        </mxCell>

        <mxCell id="langchain" value="LangChain&#xa;Models" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="60" y="590" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="langgraph" value="LangGraph&#xa;Orchestration" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="160" y="590" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="abides" value="ABIDES&#xa;Simulation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="260" y="590" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="postgres" value="PostgreSQL&#xa;Persistence" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="360" y="590" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="analysis-svc" value="AnalysisService&#xa;Metrics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="460" y="590" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="validator-svc" value="StrategyValidator&#xa;AST + Sandbox" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="560" y="590" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="streamlit" value="Streamlit&#xa;UI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="670" y="590" width="80" height="40" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
